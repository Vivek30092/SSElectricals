{% extends 'emails/base_email.html' %}
{% load static %}

{% block title %}New Appointment Assignment - Shiv Shakti Electricals{% endblock %}

{% block content %}
<tr>
    <td style="padding: 40px 30px;">
        <!-- Assignment Banner -->
        <div
            style="background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); padding: 30px; border-radius: 12px; text-align: center; margin-bottom: 30px;">
            <div
                style="width: 70px; height: 70px; background: rgba(255,255,255,0.2); border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 35px; color: #333;">üîß</span>
            </div>
            <h1 style="color: #333; font-size: 28px; margin: 0; font-weight: 700;">New Appointment Assigned</h1>
        </div>

        <!-- Greeting -->
        <p style="color: #333; font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
            Dear <strong>{{ electrician.name }}</strong>,
        </p>

        <p style="color: #555; font-size: 15px; line-height: 1.8; margin-bottom: 25px;">
            A new service appointment has been assigned to you. Please review the details below and confirm your
            availability.
        </p>

        <!-- Customer Details Card -->
        <div
            style="background: #fff3cd; border-radius: 12px; padding: 25px; margin-bottom: 25px; border-left: 4px solid #ffc107;">
            <h3 style="color: #856404; font-size: 18px; margin: 0 0 20px 0; font-weight: 600;">
                üë§ Customer Details
            </h3>

            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="padding: 10px 0; color: #666; width: 40%;">Name:</td>
                    <td style="padding: 10px 0; color: #333; font-weight: 600;">{{ customer_name }}</td>
                </tr>
                <tr>
                    <td style="padding: 10px 0; color: #666;">Phone:</td>
                    <td style="padding: 10px 0;">
                        <a href="tel:{{ customer_phone }}"
                            style="color: #0d6efd; text-decoration: none; font-weight: 500;">
                            üìû {{ customer_phone }}
                        </a>
                    </td>
                </tr>
            </table>
        </div>

        <!-- Appointment Details -->
        <div style="background: #f8f9fa; border-radius: 12px; padding: 25px; margin-bottom: 25px;">
            <h3 style="color: #333; font-size: 18px; margin: 0 0 20px 0; font-weight: 600;">
                üìÖ Appointment Details
            </h3>

            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="padding: 10px 0; color: #666; width: 40%;">Service:</td>
                    <td style="padding: 10px 0; color: #333; font-weight: 500;">
                        {% if appointment.service %}{{ appointment.service.name }}{% else %}General Service{% endif %}
                    </td>
                </tr>
                <tr>
                    <td style="padding: 10px 0; color: #666;">Date:</td>
                    <td style="padding: 10px 0; color: #dc3545; font-weight: 600;">{{ appointment.date|date:"l, d F Y"
                        }}</td>
                </tr>
                <tr>
                    <td style="padding: 10px 0; color: #666;">Time:</td>
                    <td style="padding: 10px 0; color: #dc3545; font-weight: 600;">{{ appointment.time|time:"g:i A" }}
                    </td>
                </tr>
                <tr>
                    <td style="padding: 10px 0; color: #666;">Visiting Charge:</td>
                    <td style="padding: 10px 0; color: #28a745; font-weight: 600;">‚Çπ{{ appointment.visiting_charge }}
                    </td>
                </tr>
            </table>
        </div>

        <!-- Location -->
        <div style="background: #e7f1ff; border-radius: 12px; padding: 25px; margin-bottom: 25px;">
            <h3 style="color: #0d6efd; font-size: 18px; margin: 0 0 15px 0; font-weight: 600;">
                üìç Service Location
            </h3>
            <p style="color: #333; font-size: 15px; margin: 0 0 15px 0; line-height: 1.8;">
                {{ address }}
            </p>
            <a href="https://www.google.com/maps/search/?api=1&query={{ address|urlencode }}"
                style="display: inline-block; background: #0d6efd; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: 500;">
                üó∫Ô∏è Open in Maps
            </a>
        </div>

        <!-- Problem Description -->
        {% if appointment.problem_description %}
        <div style="background: #f8d7da; border-radius: 12px; padding: 25px; margin-bottom: 25px;">
            <h3 style="color: #721c24; font-size: 18px; margin: 0 0 15px 0; font-weight: 600;">
                ‚ö†Ô∏è Problem Description
            </h3>
            <p style="color: #333; font-size: 15px; margin: 0; line-height: 1.8;">
                {{ appointment.problem_description }}
            </p>
        </div>
        {% endif %}

        <!-- Action Required -->
        <div style="background: #d4edda; border-radius: 12px; padding: 20px; margin-bottom: 25px; text-align: center;">
            <h4 style="color: #155724; font-size: 16px; margin: 0 0 10px 0;">‚úÖ Action Required</h4>
            <p style="color: #155724; font-size: 14px; margin: 0;">
                Please contact the customer to confirm the appointment and reach the location on time.
            </p>
        </div>

        <!-- Contact Shop -->
        <div style="text-align: center; padding: 20px 0;">
            <p style="color: #666; font-size: 14px; margin: 0 0 10px 0;">For any queries, contact the shop:</p>
            <p style="margin: 0;">
                <a href="tel:+919993149226"
                    style="color: #ffc107; text-decoration: none; font-weight: 600; font-size: 16px;">
                    üìû +91-9993149226
                </a>
            </p>
        </div>
    </td>
</tr>
{% endblock %}